






function MovingObject.LoadArticle(nArtNr)


local hScene=application.getCurrentUserScene()
local hUser=application.getCurrentUser()
local hList1=hud.getComponent(hUser,"MoveObjectHUD.ModulesList_1")
local nPosX,nPosY=hud.getCursorPosition(hUser)
local hBtnPressed=hud.getComponentAtPoint(hUser,nPosX,nPosY)
local nIndex=hud.getUnderCursorListItem(hUser)
local sName

if nIndex~=nil then

sName=hud.getListItemIconAt(hList1,nIndex,0)

else
end


local tObjects=this.tObjectsInScene()


local nSceneModelCount=user.getAIVariable(hUser,"MovingObject","nSceneModels")



log.message("User clicked: ",hBtnPressed,"      Got name: ",sName)

local nCursorX,nCursorY=hud.getCursorPosition(this.getUser())

local hObject=scene.createRuntimeObject(hScene,nArtNr)

if hObject

then

object.addAIModel(hObject,"SliderTarget")
local nSceneModelCount=nSceneModelCount+1



user.setAIVariable(hUser,"MovingObject","nSceneModels",nSceneModelCount)


object.setTranslation(hObject,0,0,0,object.kGlobalSpace)

object.addAIModel(hObject,"ObjectAI")
local sTag="Article_"..nArtNr.."_"..nSceneModelCount
scene.setRuntimeObjectTag(hScene,hObject,sTag)

table.add(tObjects,sTag)

log.message("Added to table index :",nSceneModelCount," ","Value :",table.getAt(tObjects,nSceneModelCount-1))




sensor.add(hObject,sensor.kShapeTypeBox)



local cx,cy,cz=object.getBoundingSphereCenter(hObject)
local x1,y1,z1=object.getBoundingBoxMin(hObject)
local x2,y2,z2=object.getBoundingBoxMax(hObject)
local scx,scy,scz=object.getScale(hObject)

local sx=math.abs(x2-x1)
local sy=math.abs(y2-y1)
local sz=math.abs(z2-z1)


sensor.setBoxCenterAt(hObject,0,cx,cy,cz,object.kLocalSpace)


sensor.setBoxSizeAt(hObject,0,sx,sy,sz)






local nId=sensor.set
sensor.setIDAt(hObject,0,0)

if hObject then

log.message(nSceneModelCount)
else
log.message("Object not creared.")
end
































hud.callAction(hUser,"HUD_sidemenu.HideContentTypeWnd")
local hThumbHolder=hud.getComponent(hUser,"HUD_sidemenu.Wnd_Thumbnails")
local hThumbHolder_1=hud.getComponent(hUser,"HUD_sidemenu.Wnd_Thumbnails0")




hud.setComponentVisible(hThumbHolder,true)
hud.setComponentVisible(hThumbHolder_1,false)














































































































































end






























































































end
