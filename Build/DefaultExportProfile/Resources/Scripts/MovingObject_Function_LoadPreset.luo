






function MovingObject.LoadPreset(nArtNr)

local hScene=application.getCurrentUserScene()
local hUser=application.getCurrentUser()
local hList1=hud.getComponent(hUser,"MoveObjectHUD.ModulesList_1")
local nPosX,nPosY=hud.getCursorPosition(hUser)
local hBtnPressed=hud.getComponentAtPoint(hUser,nPosX,nPosY)
local nIndex=hud.getUnderCursorListItem(hUser)
local sName

if nIndex~=nil then

sName=hud.getListItemIconAt(hList1,nIndex,0)

else
end


local tObjects=this.tObjectsInScene()


local nSceneModelCount=user.getAIVariable(hUser,"MovingObject","nSceneModels")



log.message("User clicked: ",hBtnPressed,"      Got name: ",sName)

local nCursorX,nCursorY=hud.getCursorPosition(this.getUser())

local hObject=scene.createRuntimeObject(hScene,nArtNr)

if hObject

then

object.addAIModel(hObject,"SliderTarget")
local nSceneModelCount=nSceneModelCount+1



user.setAIVariable(hUser,"MovingObject","nSceneModels",nSceneModelCount)


object.setTranslation(hObject,0,12,0,object.kGlobalSpace)

object.addAIModel(hObject,"ObjectAI")
local sTag="Article_"..nArtNr.."_"..nSceneModelCount
scene.setRuntimeObjectTag(hScene,hObject,sTag)

table.add(tObjects,sTag)

log.message("Added to table index :",nSceneModelCount," ","Value :",table.getAt(tObjects,nSceneModelCount-1))

local hGroup=scene.getTaggedObject(hScene,sTag)

log.message("hLoad preset: ",hGroup)


sensor.add(hGroup,sensor.kShapeTypeBox)



local cx,cy,cz=object.getBoundingSphereCenter(hGroup)
local x1,y1,z1=object.getBoundingBoxMin(hGroup)
local x2,y2,z2=object.getBoundingBoxMax(hGroup)
local scx,scy,scz=object.getScale(hGroup)

local sx=math.abs(x2-x1)
local sy=math.abs(y2-y1)
local sz=math.abs(z2-z1)












local nId=sensor.set


if hObject then

log.message(nSceneModelCount)
else
log.message("Object not creared.")
end







if(dynamics.createCompositeBody(hObject))then




if(dynamics.addCompositeBodyBoxGeometry(hObject,sx,sy,sz,0,0,0))

then
dynamics.enableDynamics(hObject,false)
dynamics.enableCollisions(hObject,false)
dynamics.enableGravity(hObject,false)
dynamics.enableRotations(hObject,false)

dynamics.setMass(hObject,80)


if(dynamics.finalizeCompositeBody(hObject)==false)
then

end
end
end















































































































































end
































































































end
